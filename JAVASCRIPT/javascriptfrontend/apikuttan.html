<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajaxjyson</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</head>
<body>
    <div  class="container-fluid">
        
        <h1 class="text-center">Todo List</h1>
        <center>
    <table class="table w-75 ms-5 mt-5">
  <thead>
     <tr>
 <th >User ID</th>
      <th >ID</th>
      <th>TITLE</th>
      <th >COMPLETED</th>
    </tr> 
  </thead>
  <tbody id="result">
    <!-- <tr>
      <th scope="row">1</th>
      <td>Mark</td>
      <td>Otto</td>
      <td>@mdo</td>
      <td>@mdo</td>
    </tr>
    <tr>
      <th scope="row">2</th>
      <td>Jacob</td>
      <td>Thornton</td>
      <td>@fat</td>
      <td>@mdo</td>
    </tr>
    <tr>
      <th scope="row">3</th>
      <td >Larry the Bird</td>
      <td>@twitter</td>
      <td>@mdo</td>
      <td>@mdo</td>
    </tr> -->
    
  </tbody>
</table>
</center>
</div>
</body>
<script>
    //ajax make use of xmlhttprequest class
    //1)object
    const http = new XMLHttpRequest()
    //2)api call
    http.open('get','https://jsonplaceholder.typicode.com/todos')
    //3)send request
    http.send()
    //readystate
    console.log(http.readyState);
    // http.onreadystatechange = ()=>{console.log(http.readyState);}
    http.onreadystatechange=()=>{console.log(http.readyState);
    if(http.readyState==4){
        if(http.status>= 200 &&http.status<300){
        console.log(http.responseText);

        let alltodos = JSON.parse(http.responseText)
        console.log(alltodos);
        alltodos.forEach(item => { 
            result.innerHTML+=`<tr>
             <td>${item.userId}<td>
                <td>${item.id}<td>
                 <td>${item.title}<td>
                  <td>${item.completed}<td>
                </tr>`
            
        });
        }
        else{
            console.log('no response');
        }
    }
    
        else{
            console.log('no response');
        }
    }
</script>
</html>